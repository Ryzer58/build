From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Ryzer58 <ryestar101@gmail.com>
Date: Sat, 10 Aug 2024 00:09:43 +0100
Subject: Fix system path aliasing on Allwinner A10 to synchronize interface numbers between hardware and software

Signed-off-by: Ryzer58 <ryestar101@gmail.com>
---
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c1.dtso          | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c2.dtso          | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-jedec-nor.dtso | 6 +++---
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-spidev.dtso    | 6 +++---
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi0.dtso          | 4 ++--
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi1.dtso          | 4 ++--
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi2.dtso          | 4 ++--
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart2.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart3.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart4.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart5.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart6.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart7.dtso         | 2 +-
 13 files changed, 20 insertions(+), 20 deletions(-)

diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c1.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c1.dtso
index 4c104bf4a5f0..e54a780bd04d 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c1.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c1.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			i2c1 = "/soc@1c00000/i2c@1c2b000";
+			i2c1 = "/soc/i2c@1c2b000";
 		};
 	};
 
 	fragment@1 {
 		target = <&i2c1>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c2.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c2.dtso
index 1c2c3e9aca81..b94426bf0332 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c2.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-i2c2.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			i2c2 = "/soc@1c00000/i2c@1c2b400";
+			i2c2 = "/soc/i2c@1c2b400";
 		};
 	};
 
 	fragment@1 {
 		target = <&i2c2>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-jedec-nor.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-jedec-nor.dtso
index ee4ff6f453d1..bf6142fd0e2c 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-jedec-nor.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-jedec-nor.dtso
@@ -5,13 +5,13 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi0 = "/soc@1c00000/spi@1c05000";
-			spi1 = "/soc@1c00000/spi@1c06000";
-			spi2 = "/soc@1c00000/spi@1c17000";
+			spi0 = "/soc/spi@1c05000";
+			spi1 = "/soc/spi@1c06000";
+			spi2 = "/soc/spi@1c17000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi0>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-spidev.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-spidev.dtso
index eac4f1e2d244..b3258c8d6d47 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-spidev.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi-spidev.dtso
@@ -5,13 +5,13 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi0 = "/soc@1c00000/spi@1c05000";
-			spi1 = "/soc@1c00000/spi@1c06000";
-			spi2 = "/soc@1c00000/spi@1c17000";
+			spi0 = "/soc/spi@1c05000";
+			spi1 = "/soc/spi@1c06000";
+			spi2 = "/soc/spi@1c17000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi0>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi0.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi0.dtso
index cad50d8a29a7..41190d19535d 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi0.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi0.dtso
@@ -1,15 +1,15 @@
 /dts-v1/;
 /plugin/;
 
 / {
-	compatible = "allwinner,sun7i-a20";
+	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi0 = "/soc@1c00000/spi@1c05000";
+			spi0 = "/soc/spi@1c05000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi0>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi1.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi1.dtso
index 8c606d6b06a1..15a7015455ac 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi1.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi1.dtso
@@ -1,15 +1,15 @@
 /dts-v1/;
 /plugin/;
 
 / {
-	compatible = "allwinner,sun7i-a20";
+	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi1 = "/soc@1c00000/spi@1c06000";
+			spi1 = "/soc/spi@1c06000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi1>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi2.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi2.dtso
index 145f285588f8..acdfdb346ab7 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi2.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-spi2.dtso
@@ -1,15 +1,15 @@
 /dts-v1/;
 /plugin/;
 
 / {
-	compatible = "allwinner,sun7i-a20";
+	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi2 = "/soc@1c00000/spi@1c17000";
+			spi2 = "/soc/spi@1c17000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi2>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart2.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart2.dtso
index 89bb44d5aee0..073b93d59383 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart2.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart2.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial2 = "/soc@1c00000/serial@1c28800";
+			serial2 = "/soc/serial@1c28800";
 		};
 	};
 
 	fragment@1 {
 		target = <&pio>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart3.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart3.dtso
index f599d92082e4..aeedb9fc5774 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart3.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart3.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial3 = "/soc@1c00000/serial@1c28c00";
+			serial3 = "/soc/serial@1c28c00";
 		};
 	};
 
 	fragment@1 {
 		target = <&pio>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart4.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart4.dtso
index b5e562a6477b..02a18c281884 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart4.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart4.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial4 = "/soc@1c00000/serial@1c29000";
+			serial4 = "/soc/serial@1c29000";
 		};
 	};
 
 	fragment@1 {
 		target = <&pio>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart5.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart5.dtso
index 12c3f9699b23..3ce3416ea527 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart5.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart5.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial5 = "/soc@1c00000/serial@1c29400";
+			serial5 = "/soc/serial@1c29400";
 		};
 	};
 
 	fragment@1 {
 		target = <&pio>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart6.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart6.dtso
index 6be41d505509..5c7a1e3d473d 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart6.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart6.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial6 = "/soc@1c00000/serial@1c29800";
+			serial6 = "/soc/serial@1c29800";
 		};
 	};
 
 	fragment@1 {
 		target = <&pio>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart7.dtso b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart7.dtso
index 967f6afbe7d3..d66610c19991 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart7.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun4i-a10-uart7.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun4i-a10";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial7 = "/soc@1c00000/serial@1c29c00";
+			serial7 = "/soc/serial@1c29c00";
 		};
 	};
 
 	fragment@1 {
 		target = <&pio>;
-- 
Created with Armbian build tools https://github.com/armbian/build

